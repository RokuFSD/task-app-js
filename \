import { generateElement, capitalize } from "./utils";
import { TaskSection as inbox } from "./TaskSection";
import { NotesSection as notes } from "./Notes";

export const App = (() => {
  let header = document.querySelector(".app__header");
  let body = document.querySelector(".app__body");
  let headerTitle = "";
  let bodyContent = "";
  let currentPage = "";

  function createHeader() {
    headerTitle = generateElement("h1", { class: "header__title" });
    headerTitle.textContent = capitalize(currentPage);
  }

  function createBodyContent() {
    bodyContent = objectOf().getElement();
  }

  function appendHeader() {
    header.appendChild(headerTitle);
  }

  function appendBodyContent() {
    body.appendChild(bodyContent);
  }

  function objectOf() {
    if (currentPage === "inbox") return inbox;
    return notes;
  }

  function reset() {
    if (bodyContent && headerTitle) {
      header.removeChild(headerTitle);
      body.removeChild(bodyContent);
    }
  }

  function handlePage(page) {
    currentPage = page;
    reset();
    createHeader();
    createBodyContent();
  }

  function renderPage(page) {
    handlePage(page);
    appendHeader();
    appendBodyContent();
  }

  return {
    renderPage,
  };
})();
//Initial state
App.renderPage("inbox");
